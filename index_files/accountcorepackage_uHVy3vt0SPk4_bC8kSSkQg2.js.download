!function(){function e(){}function n(n){var t=u.Animations;return!t||e.$forcejQuery||n?!1:t.Enabled||!1}function t(e,n,t){if($B.IE){try{e[0].style.removeAttribute("filter")}catch(i){}}o(e,n,t)}function o(e,n,t){e&&(n?(e.show(),e.css("opacity","1")):(e.css("opacity","0"),e.hide())),t&&t()}function i(e,n,t){setTimeout(function(){o(e,n,t)},0)}function r(){var e=jQuery("#identityBanner");return e&&e.length>0?e:null}function a(){var e,n=document.createElement("div"),t={"animation":"animationend","OAnimation":"oAnimationEnd","MozAnimation":"animationend","WebkitAnimation":"webkitAnimationEnd"};
for(var o in t){if(void 0!==n.style[o]){return e=t[o],t[o]}}return""}function l(n,t){var o=jQuery("#inner");if(o.length>0){if(!n){return void o.removeClass("zero-opacity")}o.hasClass("zero-opacity")?(o.one(e.animationEndEventName,function(){o.removeClass("zero-opacity"),t&&t()}),o.addClass("fade-in-lightbox")):t&&t()}}function s(){var e=!1,n=["Webkit","Moz","O"],t=document.createElement("div");if(e=void 0!==t.style.animationName,!e){for(var o=n.length,i=0;o>i;i++){if(void 0!==t.style[n[i]+"AnimationName"]){e=!0;
break}}}return e}var c=window,u=c.wLive,d=c.$Config.WLXAccount;registerNamespace("wLive.Account"),u.Account.AnimationHelper=e,e.$forcejQuery=!1,e.enabled=!(d.isXbox||d.isWin10||d.isHolo||d.disableAnimations),e.isCSSAnimationSupported=s(),e.convergedAnimationEnabled=d.Animation.showConvergedAnimation&&e.isCSSAnimationSupported,e.animationEndEventName=a(),e.fadeIn=function(r,a,l){e.enabled?n(l)?u.Animations.fadeIn(r).then(function(){o(r,!0,a)}):r.fadeIn(100,function(){t(r,!0,a)}):i(r,!0,a)},e.fadeOut=function(r,a,l){e.enabled?n(l)?u.Animations.fadeOut(r).then(function(){o(r,!1,a)
}):r.fadeOut(100,function(){t(r,!1,a)}):i(r,!1,a)},e.enterContentOnNext=function(n,t,i){if(!e.convergedAnimationEnabled){return d.Animation.showConvergedAnimation&&!e.isCSSAnimationSupported&&l(!1),void e.enterContent(n,t)}var a=null,s=i.animate,c=i.show;n.css("opacity",0),s&&c&&(a=r(),a&&a.css("opacity",0)),n.addClass(c?"pagination-view has-identity-banner":"pagination-view");var u=function(){n.one(e.animationEndEventName,function(){s&&c&&a&&(a.css("opacity",1),a.removeClass("animate slide-in-next")),o(n,!0,t),n.removeClass("animate slide-in-next")
}),setTimeout(function(){s&&c&&a&&a.addClass("animate slide-in-next"),n.addClass("animate slide-in-next")},0)};l(!0,u)},e.enterContentOnBack=function(n,t,i){if(!e.convergedAnimationEnabled){return void e.enterContent(n,t)}var a=null,l=i.animate,s=i.show;n.css("opacity",0),l&&s&&(a=r(),a&&a.css("opacity",0)),n.addClass(s?"pagination-view has-identity-banner":"pagination-view"),n.one(e.animationEndEventName,function(){l&&s&&a&&(a.css("opacity",1),a.removeClass("animate slide-in-back")),o(n,!0,t),n.removeClass("animate slide-in-back")
}),setTimeout(function(){l&&s&&a&&a.addClass("animate slide-in-back"),n.addClass("animate slide-in-back")},0)},e.enterContent=function(r,a,l){if(e.enabled){if(n(l)){u.Animations.enterContent(r).then(function(){o(r,!0,a)})}else{var s="left",c=40;$B&&$B.rtl&&(s="right",c=-40);var d=(r.position(),""),p=r.prop("style");p&&(d=p[s]),r.css(s,"+="+c+"px"),r.css("opacity","0.0");var f={"opacity":"1.0"};f[s]="-="+c+"px",r.animate(f,170,function(){r.css(s,d),t(r,!0,a)})}}else{i(r,!0,a)}},e.exitContentOnBack=function(n,t,i){if(!e.convergedAnimationEnabled){return void e.exitContent(n,t)
}var a=i.animate,l=i.show;if(n.addClass(l?"pagination-view has-identity-banner":"pagination-view"),n.one(e.animationEndEventName,function(){if(a&&l){var e=r();e&&e.removeClass("animate slide-out-back")}o(n,!1,t),n.removeClass("animate slide-out-back")}),a&&l){var s=r();s&&s.addClass("animate slide-out-back")}n.addClass("animate slide-out-back")},e.exitContentOnNext=function(n,t,i){if(!e.convergedAnimationEnabled){return void e.exitContent(n,t)}var a=i.animate,l=i.show;if(n.addClass(l?"pagination-view has-identity-banner":"pagination-view"),n.one(e.animationEndEventName,function(){if(a&&l){var e=r();
e&&e.removeClass("animate slide-out-next")}o(n,!1,t),n.removeClass("animate slide-out-next")}),a&&l){var s=r();s&&s.addClass("animate slide-out-next")}n.addClass("animate slide-out-next")},e.exitContent=function(r,a,l){if($B.IE&&11==$B.V&&(l=!0),e.enabled){if(n(l)){u.Animations.exitContent(r).then(function(){o(r,!1,a)})}else{var s="left",c="-=10px";$B&&$B.rtl&&(s="right",c="+=10px");var d=(r.position(),""),p=r.prop("style");p&&(d=p[s]);var f={"opacity":"0.0"};f[s]=c,r.animate(f,80,function(){r.css(s,d),t(r,!1,a)
})}}else{i(r,!1,a)}},e.addToList=function(r,a,l){e.enabled?n(l)?(r.show(),u.Animations.addToList(r).then(function(){o(r,!0,a)})):r.slideDown(100,function(){t(r,!0,a)}):i(r,!0,a)},e.deleteFromList=function(r,a,l){e.enabled?n(l)?u.Animations.deleteFromList(r).then(function(){o(r,!1,a)}):r.slideUp(100,function(){t(r,!1,a)}):i(r,!1,a)},e.deleteFromListFast=function(r,a,l){e.enabled?n(l)?u.Animations.deleteFromListFast(r).then(function(){o(r,!1,a)}):r.slideUp(50,function(){t(r,!1,a)}):i(r,!1,a)},e.expand=function(r,a,l){e.enabled?n(l)?(r.show(),u.Animations.expand(r).then(function(){o(r,!0,a)
})):r.slideDown(100,function(){t(r,!0,a)}):i(r,!0,a)},e.collapse=function(r,a,l){e.enabled?n(l)?u.Animations.collapse(r).then(function(){o(r,!0,a)}):r.slideUp(100,function(){t(r,!0,a)}):i(r,!0,a)}}(),function(){function e(e,n){if(e){if("undefined"!=typeof n&&n[e]){return GetString("live.accounts.strings."+n[e])}if(k[e]){return GetString("live.accounts.strings."+k[e])}}var t=GetString("live.accounts.strings.error_"+e);return t||(t=GetString("live.accounts.strings."+e)),t||(t=GetString("live.accounts.strings."+w)),t
}function n(e){return"string"==typeof e}function t(e,t,o){return n(e)&&n(t)?o?e.toLowerCase()===t.toLowerCase():e===t:!1}function o(e,n){if(e=(e||"").trim(),n&&""===e){return y}if(e.length>113){return x}var t=new RegExp(h.AltEmailRegEx);return e.match(t)?null:x}function i(e,n){var t=e>=97&&122>=e,o=e>=65&&90>=e;return t&&n||o&&!n}function r(e,n,t){return e=(e||"").trim(),n&&""===e?y:e.length>(t?t:10)?A:null}function a(e,n){return e=(e||"").trim(),n&&""===e?y:e.length>30||e.length<1?A:null}function l(e,n){n&&(e?n.css("opacity",1):n.css("opacity",0))
}function s(e,n){if(e){if(e.indexOf("@")>=0){var t=e.split("@");if(2===t.length){for(var o=t[1].toLowerCase(),i=0,r=n.length;r>i;i++){if(n[i].toLowerCase()===o){return H.Live}}return H.EASI}return H.Unknown}return H.Phone}return H.Unknown}function c(e,n){var t=!1;if(e&&n&&e.indexOf("@")>=0){var o=e.split("@");if(2===o.length){var i=o[1].toLowerCase();n.toLowerCase()===i&&(t=!0)}}return t}function u(e,n){if(e){var t=new RegExp(h.PhoneNumberFormat);if(!e.match(t)){return A}}else{if(n){return y}}return null}function d(){if(m&&m.url&&("undefined"==typeof p.HIPAMFE&&(HIPAMFE={"holder":"hipContent","scriptHolder":"hipScript","done":!1,"showMenu":!0,"showAddAccountOption":!1,"inputWidth":$B.IE&&$B.major<9?200:"100%","cssSet":{"cssCdHIPInput":"form-control input-max-width","cssCdHIPList":"form-control","cssCdHIPError":"alert alert-error","cssCdHIPErrorImg":"hide","cssCdHIPButton":"btn btn-default","cssCdHIPLabel":"text-base"},"createObservable":function(){var e=p.HIPAMFE;
return e.observable={},f.extend(e.observable,g.viewModelHandle),e.observable.hip.suppressMessages(!0),e.observable.hip(""),e.observable},"updateTitle":function(){var e=p.HIPAMFE,n=f("#HipPane");e.type&&("sms"===e.type?(f(".forVisualHip",n).addClass("hide"),f(".forSmsHip",n).removeClass("hide")):(f(".forVisualHip",n).removeClass("hide"),f(".forSmsHip",n).addClass("hide")))},"postLoad":function(){function e(e){return f("label",e).addClass("text-base text-body"),h.isWin10?(f("select",e).addClass("win-dropdown").parent().addClass("template-input inputType_large"),f("input[type=text]",e).addClass("win-textbox").parent().addClass("template-input inputType_large")):h.isWin10InclusiveOOBE?(f("select",e).removeClass().addClass("win-dropdown").parent().addClass("template-input"),f("input[type=text]",e).removeClass().addClass("win-textbox").parent().addClass("template-input")):(f("select",e).addClass("input-max-width").parent().addClass(n).removeAttr("style"),f("input[type=text]",e).removeClass("hiddenHipInputText").addClass("input-max-width").parent().addClass(n).removeAttr("style")),"#hipContent #wlspispHipControlButtonsContainer"===e.selector&&(f("body").hasClass("cb")?f("a",e).addClass("btn btn-block").parent().addClass(n).removeAttr("style"):f("a",e).addClass("btn btn-primary btn-block").parent().addClass(n).removeAttr("style")),e
}var n="form-group col-xs-24 template-input",t="col-xs-12",o=!1;f(".col-md-24").length>0?(n="form-group col-md-24 template-input",t="col-md-12",o=!1):f(".col-xs-18").length>0&&(n="form-group col-xs-18 template-input",t="col-xs-9",o=!0);var i=p.HIPAMFE,r=f("#hipDesc"),a=f("#hipTemplateContainer"),l=(f("#HipPane"),f("#"+i.holder));if(r.length>0&&r.addClass("text-body"),("undefined"===C||0===C)&&a.addClass("text-body"),b&&b.hideContentProgress(),i.updateTitle(),ko.cleanNode(a[0]),"sms"===i.type){var s=f("#pageControlHost input[type=submit]:visible");
g.ftrViewModelHandle?g.ftrViewModelHandle.buttons.nextButton.disabled(!0):s.length>0&&s.attr("disabled","disabled"),o&&f("#hipSection div.col-xs-18").addClass("alert alert-error");var c=e(f("#wlspispHIPErrorContainer",l).removeAttr("style").addClass(n)).detach().attr("data-bind","visible: !hip.suppressMessages() && !hip.isValid()"),u=e(f("#wlspispHipChallengeContainer",l).removeAttr("style")).detach(),d=e(f("#wlspispHipControlButtonsContainer",l).removeAttr("style")).detach().on("click",function(){i&&i.observable&&i.observable.hip.suppressMessages(!0)
}),v=e(f("#wlspispHipSolutionContainer",l)).hide().detach();f(".form-control",v).attr("data-bind","value: hip, setFocus: hip.focused, css: { 'has-error': !hip.suppressMessages() && !hip.isValid() }"),a.html("").append(u).append(d).append(v).append(c),i.createObservable(),i.observable.hip.suppressMessages(!0),ko.applyBindings(i.observable,a[0]);try{var m=g.viewModelHandle;m.phoneNumber&&m.phoneCountry&&i.setPhoneNumber(m.phoneCountry(),m.phoneNumber())}catch(w){}var y=i.getHipDataResponse;i.getHipDataResponse=function(e){y(e),e||(g.ftrViewModelHandle?g.ftrViewModelHandle.buttons.nextButton.disabled(!1):s.length>0&&s.removeAttr("disabled"))
},f('[id^="wlspispHIPPhoneInput"]',u).first().focus()}else{if(h.isXbox){f("#iHipRefresh").on("click",function(){i.reloadHIP()}),f("#iHipAudioLink").on("click",function(){f("#hipimageholder").hide(),f("#hipaudioholder").show(),i.type="audio",i.reloadHIP()}),f("#iHipImageLink").on("click",function(){f("#hipaudioholder").hide(),f("#hipimageholder").show(),i.type="visual",i.reloadHIP()});var u=f("<div></div>");if(i.type===L){u.append(f(".cssWLSPHIPAudio",f("a",l)).parent().detach())}else{var A=f("img",l).filter(function(){return this.src.indexOf("GetHIPData")>-1
}).css("height","96px").css("width","216px").css("display","inline").css("padding-right","10px");u.append(A.detach())}var x=f(".form-control",l).removeAttr("class");x.attr("name",x.attr("id")),i.type===L||0===$Config.isPlaceholderSupported?x.removeAttr("style").attr("data-bind","value: hip, setFocus: hip.focused, css: { 'has-error': !hip.suppressMessages() && !hip.isValid() }").addClass("spHipNoClear hipInputText primaryTextInput"):x.removeAttr("style").attr("placeholder",HIPAMFE.getInstruction()).attr("data-bind","value: hip, setFocus: hip.focused, css: { 'has-error': !hip.suppressMessages() && !hip.isValid() }"),setTimeout(function(){x.focus()
},0),a.html("").append(u).append(x.detach())}else{var d=f("<div></div>").addClass("text-body btn-group").addClass(t).append(f("a",l).addClass("btn btn-block captchaHIPLinks").attr("role","button").removeAttr("style").detach()),u=f("<div></div>").addClass(t);if(i.type===L){u.append(f(".cssWLSPHIPAudio",d).parent().detach().removeClass("btn btn-block"))}else{var A=f("img",l).filter(function(){return this.src.indexOf("GetHIPData")>-1}).css("height","auto").css("width","100%").css("max-width","200px");o||A.addClass("text-body"),u.append(A.detach())
}var v=f("<div></div>").addClass("form-group template-input").addClass(n),x=f(".form-control",l);x.attr("name",x.attr("id")),i.type!==L&&0!==$Config.isPlaceholderSupported&&f("body").hasClass("cb")?v.append(x.removeAttr("style").attr("placeholder",HIPAMFE.getInstruction()).attr("data-bind","value: hip, setFocus: hip.focused, css: { 'has-error': !hip.suppressMessages() && !hip.isValid() }").detach()):(v.append(f("label[for='"+x.attr("id")+"']",l).detach().addClass("text-base")),v.append(x.removeAttr("style").attr("data-bind","value: hip, setFocus: hip.focused, css: { 'has-error': !hip.suppressMessages() && !hip.isValid() }").detach()),i.type===L&&setTimeout(function(){x.focus()
},0));var c=f("<div></div>").addClass(n).append(f(".alert-error",l).detach().addClass("floatLeft"));a.html("").append(u).append(d).append(v).append(c)}i.createObservable(),ko.applyBindingsWithValidation(i.observable,a[0])}i.observable.hip.serverError&&(i.error=1,i.setError(),i.observable.hip.serverError=null,f.each(f(".alert-error",a),function(e,n){var t=f(n);return"inline"===t.css("display")?(t.css("display","block"),!1):void 0}))}}),p.HIPAMFE&&!p.HIPAMFE.done)){b&&b.showContentProgress();var e=f("#hipScript")[0],n=f("#hipScript script")[0];
if(n){n.src=m.url}else{var t=document.createElement("script");t.type="text/javascript",t.src=m.url,e.appendChild(t)}}}var p=window,f=p.jQuery,v=p.wLive,g=v.Account,h=(v.Core.DataRequest,p.$Config.WLXAccount),m=h.hip,C=h.isConvergedUX,b=g.Util&&g.Util.MarchingAnts,w="error_500",y="errorFieldRequired",A="errorInvalidFormat",x="errorEmailInvalidFormat",H={"EASI":"EASI","Live":"Live","Phone":"Phone","Unknown":"Unknown"},k={"errorFieldRequired":"error_1018","errorEmailInvalidFormat":"error_1035","errorEmailExists":"error_1287"},L="audio";
registerNamespace("wLive.Account.FieldHelper"),v.Account.FieldHelper.verifyEmailAddress=o,v.Account.FieldHelper.verifyOttCode=r,v.Account.FieldHelper.verifyRecoveryCode=a,v.Account.FieldHelper.strEquals=t,v.Account.FieldHelper.isCapsLockOn=i,v.Account.FieldHelper.toggleInlineLabel=l,v.Account.FieldHelper.getMemberNameType=s,v.Account.FieldHelper.doesDomainMatch=c,v.Account.FieldHelper.verifyPhoneNumber=u,v.Account.FieldHelper.getErrorString=e,v.Account.FieldHelper.loadHip=d,v.Account.FieldHelper.memberNameTypes=H,v.Account.FieldHelper.errors={"required":y,"invalidFormat":A,"emailInvalidFormat":x}
}(),function(){function e(e){if(!e){return o}if("string"!=typeof e||e.length<5||":"!=e.charAt(1)){return p}var n=e.charAt(0);return f[n]?f[n]:o}var n=window,t=n.wLive,o=0,i=1,r=2,a=3,l=4,s=5,c=6,u=7,d=8,p=-1,f={"-":o,"e":i,"a":a,"h":s,"r":r,"v":l,"s":c,"i":u,"c":d};registerNamespace("wLive.Account.TokenHelper"),t.Account.TokenHelper.getTokenType=e,t.Account.TokenHelper.Types={"none":o,"hip":s,"email":i,"reset":r,"authz":a,"recover":l,"acsrInit":u,"acsrSubmit":d,"invalid":p}}(),function(){function e(e,n){var t="&"+n.toLowerCase()+"=",o=e.toLowerCase().indexOf(t);
if(-1==o&&(t="?"+n.toLowerCase()+"=",o=e.toLowerCase().indexOf(t),-1==o)){return null}var i=e.indexOf("&",o+1);return-1==i&&(i=e.length),e.substring(o+t.length,i)}function n(e,n,t){if(!e){return""}var o="&"+n.toLowerCase()+"=",i=e.toLowerCase().indexOf(o);if(-1==i&&(o="?"+n.toLowerCase()+"=",i=e.toLowerCase().indexOf(o),-1==i)){var r="&";return-1==e.indexOf("?")&&(r="?"),e+r+n+"="+t}var a=e.indexOf("&",i+1);return-1==a&&(a=e.length),e.substring(0,i)+o+t+e.substring(a)}function t(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)
})}var o=window,i=o.wLive;registerNamespace("wLive.Account.UrlHelper"),i.Account.UrlHelper.SetQSValue=n,i.Account.UrlHelper.GetQSValue=e,i.Account.UrlHelper.FixedEncodeURIComponent=t}(),function(){function e(){function e(){a.on("unload"+o,function(){i()})}function i(){r.$.triggerHandler(t),a.off(o),a=null,r=null}var r=this,a=jQuery(n);r.$=jQuery(r),e()}var n=window,t="dispose",o=".pageEvents";e.prototype={"next":"onNext","back":"onBack","dispose":t,"setFocus":"setFocus"},registerNamespace("wLive.Account"),wLive.Account.PageEvents=new e
}(),function(){function e(e){function t(){r++}function a(e,n,t,o){function i(){v[e]=setTimeout(function(){t(),delete v[e],o&&g[e]&&(t=g[e],delete g[e],i())},n)}return o&&v[e]?void(g[e]=t):(v[e]&&(clearTimeout(v[e]),delete v[e]),void i())}function l(e){v[e]&&(clearTimeout(v[e]),delete v[e])}var s=this,c=null,u=e,d=o.isXbox,p=!1,f=n.WIZARDUI,v={},g={};s.dispose=function(){p||(c&&(c.empty(),c=null),p=!0)},s.showLoading=function(){a("LoadingIndicatorControl$loading#"+r,500,function(){p||(d?f&&f.notReady&&f.notReady():u&&(u.show(),i&&(c||(c=jQuery(i.createLoading(0,i.loadingType.spinning,"25px","25px")),jQuery(".loadingSpinner",u).append(c)),i.showLoading(c))))
})},s.hideLoading=function(e){l("LoadingIndicatorControl$loading#"+r),p||(d?f&&f.ready&&f.ready({"fKeyboardEnabled":e}):u&&(u.hide(),i&&c&&i.hideLoading(c)))},t()}var n=window,t=n.wLive,o=n.$Config.WLXAccount,i=n.$f,r=0;e.__class=!0,registerNamespace("wLive.Account.Controls"),t.Account.Controls.LoadingIndicatorControl=e}(),function(){function e(e,y,A){function x(){}function H(){var e=J&&J.pageTitle;e&&(document.title=e,ln&&vn&&vn.setHeaderText&&vn.setHeaderText(e))}function k(){var e=jQuery("#bannerBackButton");
if(e.length>0){var n=J&&J.showBannerBackButton;n?(e.show(),L(!0)):(e.hide(),L(!1))}}function L(e){var n=jQuery("#bannerBackButton");n.length>0&&(e?n.removeAttr("disabled"):n.attr("disabled","disabled"))}function E(){var e=J&&J.removeLeftNav;e&&(jQuery(".LeftNav").hide(),jQuery("body").removeClass("am_fxlnav"))}function I(){var e=J.sectionId,n=J.annotations;if(e&&n){for(var t=jQuery("#"+e,Z),o=0,i=n.length;i>o;o++){var r=n[o][0],a=n[o][1];r&&a&&t.attr("data-"+r,a)}}}function S(e){return nn&&nn[e]?rn[e]?rn[e]:("string"==typeof nn[e]?(rn[e]=jQuery("#"+nn[e],Y),s.trace("PageDialogControl.getButton ["+e+"(#"+nn[e]+")] = "+rn[e].length)):rn[e]=nn[e]instanceof jQuery?nn[e]:jQuery(),rn[e]):jQuery()
}function F(e){L(e),e?(S("action").removeAttr("disabled"),S("alternate").removeAttr("disabled"),S("cancel").removeAttr("disabled")):(S("action").attr("disabled","disabled"),S("alternate").attr("disabled","disabled"),S("cancel").attr("disabled","disabled")),tn=e}function P(e){var n="action",t=jQuery(e.currentTarget).attr("id");if(t==C+sn||t==C+sn+b){for(var o=jQuery(".default:visible",cn),i=o.length,r=0;i>r;r++){var a=jQuery(o[r]).attr("id");if(a==nn.action){n="action";break}if(a==nn.alternate){n="alternate";
break}if(a==nn.cancel){n="cancel";break}if(a==nn.skip){n="skip";break}}return T(e,n)}}function T(e,n){if(s.trace("PageDialogControl.buttonClick ["+n+"] enabled:["+tn+"]"),tn){var t=S(n);if(t.length>0&&"disabled"==t.attr("disabled")){return!1}var o=!1;"action"==n&&dn&&dn.onExternalConfirm?o=dn.onExternalConfirm():"cancel"==n&&dn&&dn.onExternalClose&&(o=dn.onExternalClose()),o||q.triggerHandler(c,{"actionName":n,"control":G,"viewModel":dn})}return e&&(e.preventDefault(),e.stopPropagation()),!1}function N(e){if(nn&&nn[e]){var n=S(e);
n.length>0&&(s.trace("PageDialogControl.on(Click) ["+e+"]"),n.on("click"+m+sn,function(n){return T(n,e)}))}r&&$Config.WLXAccount.isWin10InclusiveOOBE&&"cancel"===e&&(A.hasCancel?(r.showBackButton(!0),r.handleBackButton(function(){return T(null,e)})):r.showBackButton(!1))}function M(e){rn[e]&&(s.trace("PageDialogControl.clearButton ["+e+"(#"+nn[e]+")]"),rn[e].off("click"+m+sn),delete rn[e])}function B(e){if(rn[e]&&rn[e].length>0&&"string"==typeof nn[e]){var n=jQuery("#"+nn[e],Y);s.assert(0!=n.length,"Html has been modified and removed the linked ["+e+"] button -- hook the onCreateContent event to alter the HTML"),s.assert(n[0]===rn[e][0],"Html has been modified and has replaced the linked ["+e+"] button -- hook the onCreateContent event to alter the HTML")
}}function $(){if(N("action"),N("alternate"),N("revert"),N("cancel"),N("skip"),i&&i.$&&(i.$.on(i.next+m+sn,function(){var e="action";if(J&&J.pageNextAction&&(e=J.pageNextAction),dn&&dn.wizardUIOnNext){return void dn.wizardUIOnNext()}var n=S(e);if(n.length>0){if("disabled"==n.attr("disabled")){return}T(null,e)}else{J&&J.pageNextAction&&T(null,e)}}),i.$.on(i.back+m+sn,function(){var e="cancel";if(J&&J.pageBackAction&&(e=J.pageBackAction),dn&&dn.wizardUIOnBack){return void dn.wizardUIOnBack()}var n=S(e);if(n.length>0){if("disabled"==n.attr("disabled")){return
}T(null,e)}else{J&&J.pageBackAction&&T(null,e)}})),t.Account.DialogManager){var e=t.Account.DialogManager;e.$.on("action"+m+sn,function(){var e=J.pageNextAction||"action";T(null,e)}),e.$.on("cancel"+m+sn,function(){var e=!1;dn&&dn.onExternalClose&&(e=dn.onExternalClose()),e||G.dispose()})}cn&&cn.on("submit"+m+sn,P),un&&un.on("click"+m+sn,P);var n=J.viewModel,r=t.Account.ViewModels;if(r&&n&&pn){var a,l={"trigger":function(e){q.triggerHandler(c,{"actionName":e,"control":G,"viewModel":dn})}};a="function"==typeof n?n:r[n],dn=new a(en,J.viewModelOptions,l),t.Account.viewModelHandle=dn,o.applyBindingsWithValidation(dn,jQuery("#"+pn,Z)[0],{"insertMessages":!1,"messagesOnModified":!0})
}q.triggerHandler(p,{"content":Y,"control":G,"viewModel":dn})}function O(){i&&i.$&&i.$.off(m+sn),t.Account.DialogManager&&t.Account.DialogManager.$.off(m+sn),q.triggerHandler(f,{"content":Y,"control":G}),M("action"),M("alternate"),M("revert"),M("cancel"),M("skip"),cn&&cn.off("submit"+m+sn),un&&un.off("click"+m+sn)}function j(){if(B("action"),B("alternate"),B("revert"),B("cancel"),B("skip"),cn&&cn.length>0){var e=Y;Y!==cn&&(e=jQuery("#"+C+sn,Y)),s.assert(0!=e.length,"AutoForm has been removed -- hook the onCreateContent event to alter the HTML"),s.assert(cn[0]===e[0],"AutoForm has been modified and has replaced -- hook the onCreateContent event to alter the HTML")
}if(un&&un.length>0){var n=jQuery("input[type=submit]",Y);s.assert(0!=n.length,"AutoFormSubmit button has been removed -- hook the onCreateContent event to alter the HTML"),s.assert(un[0]===n[0],"AutoFormSubmit button has been modified and has replaced -- hook the onCreateContent event to alter the HTML")}}function Q(e,n){for(var t=n.split("."),o=t.length,i=0;o>i&&null!==e&&void 0!==e;){e=e[t[i++]]}return e}function D(e,n,t){return e.indexOf(n)>-1&&(e=e.replace(n,t)),e}function U(e){return J.getViewContextTokenValue?J.getViewContextTokenValue(en,e):Q(en,e)
}function W(e){if(!on){return!1}var n=jQuery("form",e);if(n.length>0){return!1}var t=jQuery(":input",e);return 0==t.length?!1:!0}function R(e){if(W(e)){if(cn=jQuery("<form id='"+C+sn+"' action='#' onsubmit='return false;' novalidate='novalidate' "+V()+"></form>"),cn.append(e),0==jQuery("input[type=submit]",e).length){var n=jQuery("<input aria-hidden='true' id='"+C+sn+b+"' type='submit' tabindex='-1' style='position: absolute; height: 0px; width: 0px; border: none; padding: 0px; min-width: 0px; min-height: 0px;' />");
cn.append(n)}return un=jQuery("input[type=submit]",e),cn}return e}function V(){var e="";return a.supportsUnifiedHeader&&(e=J&&J.pageTitle?"aria-label='"+J.pageTitle+"'":"aria-labelledby='iPageTitle DialogUserTitle'"),e}function _(){var e=jQuery(J.viewTemplate).clone(),n=J.viewContextTokens;if(n&&n.length>0){for(var t=e.html(),o=0;o<n.length;o++){var i=n[o],a=U(i);void 0!==a&&null!==a&&(t=D(t,"{"+i+"}",jQuery("<span />").text(a).html()))}e.html(t)}return r&&($Config.WLXAccount.isWin10||$Config.WLXAccount.isHolo)&&r.getContext(function(n){var t=n.host?n.host.toUpperCase():"",o=t===r.Hosts.OOBE||t===r.Hosts.NthUserFirstLogon||t===r.Hosts.SSCRPINReset;
jQuery(".icon-win-easeOfAccess",e).toggle(o)}),q.triggerHandler(v,{"content":e,"control":G}),R(e)}function X(){J.focusFirstButton?setTimeout(function(){Y.find(":button").first().focus()},10):J.focusFirstInput?setTimeout(function(){var e=jQuery("input,select",Y).not(":hidden").first();0==e.length&&(e=jQuery("a,button,input[type=button]",Y).not(":hidden").first()),e.focus()},fn?255:10):J.focusSubmit?setTimeout(function(){Y.find("input[type=submit]").not(":hidden").first().focus()},10):J.focusFirstElemId?setTimeout(function(){jQuery("#"+J.focusElemId,Y).first().focus()
},10):J.disableAutoFocus||setTimeout(function(){for(var e=0,n=w.length;n>e;e++){var t=jQuery(w[e],Y).not(":hidden");if(t.length>0){t.first().focus();break}}},fn?255:10)}var G=this,q=G.$=jQuery(G),z=!1,K=!1,Z=e,J=A,Y=null,en=y,nn=A.buttons,tn=!0,on=A.autoForm!==!1&&0!==A.autoForm&&"False"!==A.autoForm,rn={},an=a.isWinWab,ln=a.isWinWiz,sn=(a.isXbox,a.isWPBlue,h++),cn=null,un=null,dn=null,pn=A.sectionId,fn=l.convergedAnimationEnabled,vn=n.WIZARDUI;G.notifyVisible=function(){dn&&dn.onNotifyVisible&&dn.onNotifyVisible()
},G.content=function(){return Y},G.show=function(){s.trace("PageDialogControl.show()"),Y||(Y=_()),K||(Z.append(Y),K=!0),I(),H(),k(),$(),Y.show(),an&&(jQuery("form").parents("div").css("height","100%"),"undefined"!=typeof setContentWidth&&setContentWidth()),q.triggerHandler(u,{"content":Y,"control":G}),X(),E(),j(),s.trace("PageDialogControl.~show()")},G.hide=function(){s.trace("PageDialogControl.hide()"),Y.hide(),q.triggerHandler(d,{"content":Y,"control":G}),O(),Y.detach(),K=!1},G.setEnabled=function(e){s.trace("PageDialogControl.setEnabled("+e+")"),F(e)
},G.getButton=S,G.dispose=function(){s.trace("PageDialogControl.dispose()"),z||(q.triggerHandler(g,{"control":G}),O(),Y.empty(),K&&Y.remove(),Y=null,z=!0,G.$=null),G=null,q=null,nn=null,rn=null,Z=null,J=null,y=null,A=null},x()}var n=window,t=n.wLive,o=n.ko,i=t.Account.PageEvents,r=n.MSA&&n.MSA.CXH,a=n.$Config.WLXAccount,l=t.Account.AnimationHelper,s=n.$Debug,c="onAction",u="onShow",d="onHide",p="onSetupEvents",f="onRemoveEvents",v="onCreateContent",g="onDispose",h=0,m=".pagedialog",C="pageDialogForm_",b="_submit",w=["[autofocus]","[autofocus=autofocus]","[autofocus=true]","input","button","a","select","textarea"];
e.prototype.events={"action":c,"createContent":v,"show":u,"hide":d,"setupEvents":p,"removeEvents":f,"dispose":g},e.__class=!0,registerNamespace("wLive.Account.Controls"),t.Account.Controls.PageDialogControl=e}(),function(){function e(e,t,w){function y(){}function A(e){var n,t=X[e];return n=o(t.template?t.template:w.defaultTemplate?w.defaultTemplate:"<div></div>"),n.hide(),n}function x(e,n){var t,o=X[n];return new(t="function"==typeof o.control?o.control:r[o.control])(e,_,o.options)}function H(e,n){l.trace("FlowController.notifyVisible ["+n+"]"),!j&&e&&e[C]&&e[C](),L(e,!0),O.triggerHandler(c,{"controller":$,"control":e,"state":n,"viewContext":_})
}function k(e,n,t,i){if(i[m]&&!i[m](e)){return null}if(o.isFunction(t)){return t()}if(q[b]){var r=q[b](n,t,_,e);if(r){if(o.isArray(t)){for(var a=0;a<t.length;a++){if(t[a]===r){return r}}}else{if(r===t){return r}}}return null}return t}function L(e,n){e&&e[h]&&e[h](n)}function E(e,t,r,a,s,c,u){if(!j&&U===e){Q.append(e),R=o(t),l.trace("Hooking control events for ["+r+"]");var d=t.events;for(var p in d){var f=d[p];R.on(f,{"eventName":f,"state":r,"control":t},M)}R.on(t.events.action,{"state":r,"control":t},B),V=e,e.show(),t.show();
var g=function(){if(e.show(),W===t&&H(t,r),a.pageId){var o={"pageId":a.pageId,"userAction":a.userAction};if($ReportEvent.SetCustomPageLoadCompletedTime((new Date).getTime()),$ReportEvent.PageLoadCompleted(),$ReportEvent.Fire(o),"undefined"!=typeof UserTracker&&"function"==typeof UserTracker.notifyDOMUpdate){try{UserTracker.notifyDOMUpdate()}catch(i){}}n.$Config.hpgid=a.pageId}};if(s){var h=a.options&&1===a.options.showIdentityBanner,m={"animate":u,"show":h};c?i.enterContentOnBack(e,g,m):i.enterContentOnNext(e,g,m)
}else{g()}O.triggerHandler(v,{"controller":$,"activeState":r,"control":t,"container":e,"viewContext":_})}}function I(){z=[]}function S(e,n){if(!e.skipBackStack){if(z.length>0&&z[0]!=n){for(var t=0;t<z.length;t++){if(z[t]==n){z=z.slice(0,t);break}}}z.push(n)}}function F(e){if(z.length>0){for(var n=z.length-1;n>=0;n--){if(z[n]==e){z=z.slice(0,n);break}}}}function P(e,n){if(z.length>0){l.trace("FlowController.getBackState("+e+", "+n+") -- "+z);for(var t=z.length-1;t>=0;t--){var i=z[t];if(i!=e&&i){if(o.isArray(n)){for(var r=0;r<n.length;r++){if(n[r]==i){return i
}}}else{if(i==n){return i}}}}}return null}function T(e,n,t){if(!j){if(l.trace("FlowController.showControl("+e+")"),D!=e&&X[e]){l.trace("New State ["+e+"] from ["+D+"]"),O.triggerHandler(f,{"control":$,"activeState":D,"newState":e,"viewContext":_});var r=X[e],s=r.url,c=r.target,d=r.cancelUrl,v=r.triggerAction;if(s){return l.trace("Navigate to ["+s+"]"),O.triggerHandler(p,{"control":$,"url":s,"viewContext":_}),void(d?((K||Z)&&a?a.openExternalWebBrowser(s):c&&$Utility.navigateTo(s,c),$Utility.navigateTo(d)):$Utility.navigateTo(s))
}if(v){return l.trace("Trigger action ["+v+"]"),void O.triggerHandler(u,{"actionName":v,"control":$})}var g=U,h=W,m=R,C=D,b=A(e),w=x(b,e);if(U=b,W=w,R=null,m&&(l.trace("Clearing action event for ["+C+"]"),m.off(h.events.action,B)),h&&h.prepareDispose&&h.prepareDispose(),D=e,r.clearBackStack&&I(),S(r,D),g&&V===g){var y=X[C].options.showIdentityBanner!==r.options.showIdentityBanner,H=function(){if(g.hide(),h){h.hide&&h.hide(),l.trace("Clearing control hooked events ["+C+"]");var n=o(h);for(var i in w.events){n.off(i,M)
}n=null,h.dispose(),delete h}g.empty(),g.remove(),g=null,delete g,E(b,w,e,r,!0,t,y)},k=X[C].options&&1===X[C].options.showIdentityBanner,F={"animate":y,"show":k};t?i.exitContentOnBack(g,H,F):i.exitContentOnNext(g,H,F)}else{var P=!0;n&&G.animateInitial===!1&&(P=!1),E(b,w,e,r,P,t,n)}}else{l.assert(X[e],"Undefined state ["+e+"] -- re-enabling existing control"),D==e&&l.trace("Same state re-enabling the control ["+e+"]"),L(W,!0)}}}function N(e,n){return{"controller":$,"state":e.state,"control":e.control,"controlData":n,"viewContext":_}
}function M(e,n){var t=e.data;l.trace("FlowController.handleControlEvent ["+t.eventName+"] for ["+t.state+"]");var o=N(t,n);return O.triggerHandler(t.eventName+"$Control",o),!0}function B(e,n){var t=n.actionName,i=n.control,r=e.data,a=r.state,s=X[a].actions,c=s[t],u=!1;if(("cancel"==t||"backStack"==t)&&(u=!0),l.trace("FlowController.processActionEvent["+t+"] for ["+a+"]"),l.assert(a==D,"processAction state mismatch ev:["+a+"] act:["+D+"]"),a==D){var d=!1;if("backStack"==t){var p=P(a,c);p&&(c=p,d=!0)}c=k(t,a,c,i);
var f=c;if(c&&o.isArray(c)&&(f=c[0]),l.trace("FlowController.processActionEvent newState ["+f+"]"),f){if(X[f]){return d&&F(f),L(i,!1),T(f,!1,u),!0}l.fail("Invalid State ["+f+"] from ["+a+"] action ["+t+"]")}}return T(D,!1,u),!1}var $=this,O=$.$=o($),j=!1,Q=o(e),D=s,U=null,W=null,R=null,V=null,_=t,X=w.viewDefs,G=w,q=w.callbacks||{},z=[],K=n.$Config.WLXAccount.isWin10,Z=n.$Config.WLXAccount.isHolo;$.show=function(e){T(e,!0),O.triggerHandler(d,{"control":$,"viewContext":_})},$.setStateChangeFunc=function(e){q[b]=e
},$.dispose=function(){if(!j){if(D=s,W){if(null!=R){l.trace("Clearing control events ["+D+"]"),R.off(W.events.action,B);for(var e in W.events){R.off(e,M)}R=null}W.dispose()}W=null,U&&U.empty(),U=null,O.triggerHandler(g,{"control":$,"viewContext":_}),j=!0,$.$=null}O=null,$=null,j=!0,Q&&Q.empty(),Q=null,_=null,X=null,G=null},y()}var n=window,t=n.wLive,o=n.jQuery,i=t.Account.AnimationHelper,r=t.Account.Controls,a=n.MSA&&n.MSA.CXH,l=n.$Debug,s="none",c="onControlVisible",u="onAction",d="onShow",p="onNavigate",f="onStateChanging",v="onStateChanged",g="onDispose",h="setEnabled",m="validate",C="notifyVisible",b="validateStateChange";
e.prototype.events={"action":u,"show":d,"stateChanged":v,"stateChanging":f,"controlVisible":c,"dispose":g},e.__class=!0,registerNamespace("wLive.Account.Controls"),t.Account.Controls.FlowController=e}(),function(){function e(e,l){function s(){if(g&&h&&h.length>0){if(g.hasClass(n)){var e=t+w;g.on("input"+e,f).on("keypress"+e,f).on("keyup"+e,f).on("paste"+e,p).on("contextmenu"+e,f),h.on("click"+e,d)}f()}}function c(){if(!b){var e=t+w;h&&h.off(e),g&&g.off(e),g=null,h=null,m=null,C=null,v=null,b=!0}}function u(e){!b&&h&&h.length>0&&(null==C||C!=e)&&(C=e,e?h.show():h.hide(),m[i]&&m[i](e,m.context))
}function d(e){b||(3==e.which?u(!1):setTimeout(function(){!b&&g&&(g.focus(),m[r]&&m[r](g,m.context))},0))}function p(e){b||setTimeout(function(){b||f(e),e=null},0)}function f(){!b&&g&&u(!g.val())}var v=this,g=jQuery(e),h=g.next(o),m=l||{},C=null,b=!1,w=a++;v.update=u,v.dispose=c,s()}var n="placeholder",t=".placeholder",o=".placeholder",i="onVisible",r="onFocus",a=0;registerNamespace("wLive.Account.Field"),wLive.Account.Field.PlaceholderControl=e}(),function(){function e(e,n,t){function r(e){for(var n=0;n<i.length;n++){if(e==i[n]){return!0
}}return!1}function a(e){var n=c.val(),t=n.length;if(t>s&&(c.value=n.substring(0,s)),t>=s&&!r(e.which)&&e.preventDefault(),u){var o=Math.max(s-c.val().length,0);u.text(o)}}var l=this,s=e,c=n,u=t;s>0&&(c.attr("maxlength",s),c.bind("keypress"+o,a),c.bind("keydown"+o,a),c.bind("keyup"+o,a)),l.dispose=function(){c.unbind(o),c=null,u=null}}var n=window,t=n.wLive,o=".enforceMaxLength",i=[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,91,92,93,144,145,112,113,114,115,116,117,118,119,120,121,122,123];registerNamespace("wLive.Account.Field"),t.Account.Field.MaxLengthEnforcer=e
}(),function(){function e(e,n,t){function o(){}var i=this,r=(i.$=jQuery(i),t),a=n,l=a.data,s=r.params;i.show=function(){for(var n=jQuery(r.viewTemplate).clone(),t=r.formId,o=jQuery("#"+t,n),i=0,a=s.length;a>i;i++){var c=s[i];jQuery("#"+c,o).val(l[c])}e.append(n),document.forms[t].submit()},o()}var n=window,t=n.wLive,o="onShow";e.prototype.events={"show":o},e.__class=!0,registerNamespace("wLive.Account.Controls"),t.Account.Controls.RedirectionControl=e}(),function(){function e(e,n,t){function r(){}function c(e){if(e&&A[e]){return GetString("live.accounts.strings."+A[e])
}var n=GetString(b+e);return n||(n=GetString("live.accounts.strings."+e)),n||(n=GetString("live.accounts.strings."+w)),n}function x(){return{"control":P,"viewContext":B,"pollAttempts":G,"numErrors":X}}function H(e){if(!N){z&&(clearTimeout(z),z=null);var n=(new Date).getTime();if(X>=$||n>q){_&&_.hideLoading(),T.triggerHandler(f,x())}else{if(e){var t=x();t.sendPollingRequest=!0,T.triggerHandler(u,t),t.sendPollingRequest&&(z=setTimeout(E,Q))}else{j?z=setTimeout(E,Q):(_&&_.hideLoading(),T.triggerHandler(p,x()))}}}}function k(){if(!N){var e=0,n=0;
null!=Z&&(e=Z.height(),n=Z.width()),2==e?(_&&_.hideLoading(),1==n?T.triggerHandler(v,x()):T.triggerHandler(g,x())):(1!=n&&X++,H(!1)),null!=Z&&(Z.empty(),Z.remove(),Z=null)}}function L(){N||(X++,H(!1),null!=Z&&(Z.empty(),Z.remove(),Z=null))}function E(){if(!N){z=null;var e=(new Date).getTime();null!=Z&&(Z.empty(),Z=null),Z=i("<img />").attr({"id":"iSessionPollingImg","style":"display: none"}),Z.load(k),Z.error(L);var n="?slk";D.indexOf("?")>-1&&(n="&slk="),Z.attr("src",D+n+encodeURIComponent(K)+"&pa="+encodeURIComponent(e)),i("body").append(Z),G++,T.triggerHandler(d,x())
}}function I(e){N||(K=e.sessionLookupKey,B&&(B.sessionLookupKey=K),T.triggerHandler(h,x()),H(!0))}function S(e){if(!N){if(K=null,B&&delete B.sessionLookupKey,e.error&&e.error.code==y){return void T.triggerHandler(v,x())}B.pollingError=errorMessage=c(String(e.error.code)),T.triggerHandler(m,x()),W&&H(!0)}}function F(){if(!N){var n=(new Date).getTime();if(q=n+O,X=0,G=0,R){var t=i(".loadingArea",e);0==t.length&&(t=i(".waitingArea",e)),_=new s.LoadingIndicatorControl(t),_.showLoading()}if(V){var r={"channel":"PushNotifications","purpose":U},a=new o.DataRequest(null,l.sendOtt,r,I,S,1e4);
a.start()}else{H(!0)}}}var P=this,T=P.$=i(P),N=!1,M=t,B=n||{},$=M.maxErrors||a.polling.maxErrors,O=M.timeout||a.polling.timeout,j=void 0!==a.polling.enabled?a.polling.enabled:!0,Q=j?M.pollInterval||a.polling.interval:0,D=M.approvalUrl||a.url,U=M.ottPurpose||a.ottPurpose,W=void 0!==M.pollOnSendError?M.pollOnSendError:!0,R=void 0!==M.showLoading?M.showLoading:!0,V=void 0!==M.sendNotification?M.sendNotification:!0,_=null,X=0,G=0,q=null,z=null,K=a.lookupKey,Z=null;P.forcePollRequest=function(){H(!0)},P.show=function(){F()
},P.dispose=function(){if(!N){if(T.triggerHandler(C,x()),z&&(clearTimeout(z),z=null),_&&_.dispose(),_=null,null!=Z&&(Z.empty(),Z.remove(),Z=null),P&&P.$){for(var e in P.events){P.$.off(e)}T=P.$=null}P=null,M=null,B=null,$=null,O=null,j=null,Q=null,D=null,U=null,W=!1,R=!1,q=null,K=null,N=!0}},r()}var n=window,t=n.wLive,o=t.Core,i=n.jQuery,r=n.$Config.WLXAccount,a=r.sessionApproval,l=r.urls.dataRequest,s=t.Account.Controls,c="onShow",u="onStartPolling",d="onPolling",p="onPending",f="onTimeout",v="onApproved",g="onDenied",h="onSendSuccess",m="onSendError",C="onDisposing",b="live.accounts.strings.error_",w="pollingdefaulterror",y="1306",A={"errorFieldRequired":"error_1018","errorEmailInvalidFormat":"error_1035","errorEmailExists":"error_1287"};
e.prototype.events={"show":c,"startPolling":u,"polling":d,"pending":p,"timeout":f,"approved":v,"denied":g,"sendSuccess":h,"sendError":m,"disposing":C},e.__class=!0,registerNamespace("wLive.Account.Controls"),t.Account.Controls.SessionPolling=e}(),function(e){var n;!function(e){var n;!function(e){e.ActionNames={"Action":"action","Back":"back","Cancel":"cancel","Alternate":"alternate"},e.ErrorCodes={"Default":"Error_1086","IncorrectPassword":"1002"}}(n=e.Constants||(e.Constants={}))}(n=e.Account||(e.Account={}))
}(wLive||(wLive={}));